<!DOCTYPE html>
<html lang="en">
  <head>
    <title>API Data Merge Example</title>
  </head>
  <body>
    <script>
      const apiUrl1 = "https://data.cityofnewyork.us/resource/hg8x-zxpr.json"; //api for affordablle buildings
      const apiUrl2 = "https://data.cityofnewyork.us/resource/9ay9-xkek.json"; //api for other info

      async function fetchData(url) {
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        return response.json();
      }

      async function fetchAndMergeData(apiUrl1, apiUrl2) {
        try {
          const data1 = await fetchData(apiUrl1);
          const data2 = await fetchData(apiUrl2);

          return mergeDataOnProjectID(data1, data2);
        } catch (error) {
          console.error("Failed to fetch or merge data:", error);
        }
      }

      function mergeDataOnProjectID(dataSet1, dataSet2) {
        const mergedData = [];

        const dataSet2Map = new Map(
          dataSet2.map((item) => [item.projectId, item])
        );

        dataSet1.forEach((item1) => {
          const item2 = dataSet2Map.get(item1.projectId);
          if (item2) {
            mergedData.push({ ...item1, ...item2 });
          } else {
            mergedData.push(item1);
          }
        });

        return mergedData;
      }

      fetchAndMergeData(apiUrl1, apiUrl2)
        .then((mergedData) => {
          console.log("Merged Data:", mergedData);
        })
        .catch((error) => {
          console.error("Error processing merged data:", error);
        });
    </script>
  </body>
</html>


//create a component that serves as a container for API data

// APT LIST > APT (each entry)
// useEffect to get the data, and load into a state variable in the container 
// create a component for each entry and pass it as a prop
// for each entry in the state variable, render one component for each entry